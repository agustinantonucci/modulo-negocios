(this["webpackJsonptemplate-starter"]=this["webpackJsonptemplate-starter"]||[]).push([[0],{231:function(e,t,n){},232:function(e,t,n){},333:function(e,t,n){"use strict";n.r(t);var a,c,r=n(34),i=n.n(r),o=n(29),s=n(343),l=n(18),d=n(214),u=n(348),j=n(349),b=n(347),m=window.location.protocol,p=window.location.hostname,O="".concat(m,"//").concat(p,":").concat("4002"),h=new u.a({connectToDevTools:!0,cache:new j.a,link:new b.a({uri:O})}),g=n(215),f=n.n(g),x=(n(231),n(182)),v=n(216),_=n(352),N=n(78),y=n(351),S=n(353),C=n(105),w=n(342),D=n(345),k=n(344),z=n(108),R=n(355),I=n(356),E=(n(232),n(0)),F=n(350),L=n(142),A=n(346),T=Object(A.a)(a||(a=Object(L.a)(["\n  query getNegociosIframe($idCliente: Int) {\n    getNegociosIframeResolver(idCliente: $idCliente)\n  }\n"]))),B=Object(A.a)(c||(c=Object(L.a)(["\n  query getConfig {\n    getConfiguracionResolver\n  }\n"]))),q=Object(E.createContext)([]),$=function(e,t,n,a){var c=0;return e.mon_id!==t?2==t?c=1==e.mon_id?e.neg_valor*n:e.neg_valor*(n/a):3==t?c=1==e.mon_id?e.neg_valor*a:e.neg_valor*(a/n):1==t&&(c=2==e.mon_id?e.neg_valor*(1/n):e.neg_valor*(1/a)):c=e.neg_valor,{nuevoImporte:c}},U=n(219),G=n(8),J=function(e){var t=e.title,n=e.placement,a=e.children;return Object(G.jsx)(G.Fragment,{children:Object(G.jsx)(y.a,{placement:n,title:t,content:a,trigger:"click",children:Object(G.jsxs)(N.a,{type:"link",style:{padding:0},children:[" ",Object(G.jsx)(U.a,{style:{paddingLeft:0,marginRight:7,color:"#00b33c"}})]})})})},P=n(210),Y=n.n(P),K=function(e,t,n,a){switch(e){case"AR$":return M("1 USD =","1 BRL =",1/t,1/n,e,a);case"USD":return M("1 AR$ =","1 BRL =",t,t/n,e,a);case"BRL":return M("1 AR$ =","1 USD =",n,1/t*n,e,a)}},M=function(e,t,n,a,c,r){return Object(G.jsx)("div",{className:"cotizaciones",children:a?Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("p",{className:"cotizaciones_p",children:[Object(G.jsx)("span",{className:"cotizacion",children:e})," ","".concat(c," ")," ",n.toLocaleString("de-DE",{maximumFractionDigits:2})]}),Object(G.jsxs)("p",{className:"cotizaciones_p",children:[Object(G.jsx)("span",{className:"cotizacion",children:t})," ","".concat(c," ")," ",a.toLocaleString("de-DE",{maximumFractionDigits:2})]}),Object(G.jsxs)("p",{className:"info_data cotizaciones_p",children:["ultima actualizacion:"," ",Object(G.jsxs)("strong",{children:[Y()(r).format("DD/MM/YYYY hh:mm")," hs"]})]})]}):Object(G.jsxs)("p",{className:"info_data cotizaciones_p",children:["Momentaneamente el servicio de cotizaciones se encuentra"," ",Object(G.jsx)("strong",{children:"suspendido."})]})})},W=function(){var e=window.location.search.split("=")[1],t=Object(E.useRef)(null),n=Object(E.useState)([]),a=Object(o.a)(n,2),c=a[0],r=a[1],i=Object(E.useState)([]),s=Object(o.a)(i,2),l=s[0],d=s[1],u=Object(E.useState)([]),j=Object(o.a)(u,2),b=j[0],m=j[1],p=Object(E.useState)([]),O=Object(o.a)(p,2),h=O[0],g=O[1],f=Object(E.useState)([]),L=Object(o.a)(f,2),A=L[0],U=L[1],P=Object(E.useState)([]),Y=Object(o.a)(P,2),M=Y[0],W=Y[1],H=Object(E.useState)([]),Q=Object(o.a)(H,2),V=Q[0],X=Q[1],Z=Object(E.useState)([]),ee=Object(o.a)(Z,2),te=ee[0],ne=ee[1],ae=Object(E.useState)([]),ce=Object(o.a)(ae,2),re=ce[0],ie=ce[1],oe=Object(E.useState)("abierto"),se=Object(o.a)(oe,2),le=se[0],de=se[1],ue=Object(E.useState)([]),je=Object(o.a)(ue,2),be=je[0],me=je[1],pe=Object(E.useContext)(q),Oe=pe.cotizacionDolar,he=pe.cotizacionReal,ge=pe.ultimaActualizacion,fe=pe.setReloadingApp,xe=Object(F.a)(T,{variables:{idCliente:Number(e)}}),ve=xe.data,_e=(xe.loading,xe.error,Object(F.a)(B).data);Object(E.useEffect)((function(){if(fe(!0),ve&&_e){var e=JSON.parse(_e.getConfiguracionResolver),t=JSON.parse(ve.getNegociosIframeResolver);r(t.dataNeg),m(t.dataTags),ie(t.dataPipelines.map((function(e){return{text:e.pip_nombre,value:e.pip_nombre}})));var n=0,a=0,i=0,o=0,s=t.dataNeg.filter((function(e){return 0===e.neg_estado})),l=t.dataNeg.filter((function(e){return 0!==e.neg_estado}));d("abierto"===le?s:"cerrado"===le?l:c),W(s.length),X(l.filter((function(e){return 1===e.neg_estado})).length),ne(l.filter((function(e){return 2===e.neg_estado})).length);var u=e[0].mon_id;me(e[0].mon_iso),s.map((function(e){var t=$(e,u,Oe,he).nuevoImporte;i+=t*e.eta_avance/100,n+=t})),l.map((function(e){var t=$(e,u,Oe,he).nuevoImporte;o+=t*e.eta_avance/100,a+=t})),"abierto"===le?(g(n),U(i)):"cerrado"===le?(g(a),U(o)):(g(n+a),U(i+o)),fe(!1)}}),[ve,_e,le]);var Ne,ye=function(e){return e.split("T")[0].split("-").reverse().join("/")},Se=[{title:"Embudo",dataIndex:"pip_nombre",key:"pip_nombre",filters:re,onFilter:function(e,t){return t.pip_nombre===e},render:function(e){return Object(G.jsx)("p",{className:"columna-color",children:e})}},{title:"Etapa",dataIndex:"eta_nombre",key:"eta_nombre",align:"right"},Object(x.a)(Object(x.a)({title:"Negocio",dataIndex:"neg_asunto",key:"neg_asunto"},(Ne="neg_asunto",{filterDropdown:function(e){var n=e.setSelectedKeys,a=e.selectedKeys,c=e.confirm,r=e.clearFilters;return Object(G.jsxs)("div",{style:{padding:8},children:[Object(G.jsx)(v.a,{ref:t,placeholder:"Buscar negocio",value:a[0],onChange:function(e){return n(e.target.value?[e.target.value]:[])},onPressEnter:function(){return we(a,c,Ne)},style:{marginBottom:8,display:"block"}}),Object(G.jsxs)(_.b,{children:[Object(G.jsx)(N.a,{type:"primary",onClick:function(){return we(a,c,Ne)},icon:Object(G.jsx)(z.a,{}),size:"small",style:{width:90},children:"Buscar"}),Object(G.jsx)(N.a,{onClick:function(){return r&&De(r)},size:"small",style:{width:90},children:"Reiniciar"})]})]})},filterIcon:function(e){return Object(G.jsx)(z.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,t){return t[Ne]?t[Ne].toString().toLowerCase().includes(e.toLowerCase()):""}})),{},{render:function(e,t){var n=b.filter((function(e){return e.neg_id===t.neg_id}));return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("p",{className:"columna-color",children:e}),Object(G.jsx)("div",{className:n.length>0?"div-contenedor":"",children:n.map((function(e,t){return Object(G.jsx)(y.a,{content:n.map((function(e){return Object(G.jsx)(S.a,{color:e.etq_color,children:e.etq_nombre},e.etq_id)})),children:Object(G.jsx)(S.a,{color:e.etq_color,className:"tags"},e.etq_id)},t)}))})]})}}),{title:"Importe",dataIndex:"neg_valor",key:"neg_valor",align:"right",sorter:function(e,t){return e.neg_valor-t.neg_valor},render:function(e,t){return Object(G.jsx)(G.Fragment,{children:"".concat(t.mon_iso," ").concat(e.toLocaleString("de-DE",{minimumFractionDigits:0}))})}},{title:"% Etapa",dataIndex:"eta_avance",key:"eta_avance",align:"right",sorter:function(e,t){return e.eta_avance-t.eta_avance}},{title:"Fecha de Creaci\xf3n",dataIndex:"neg_fechacreacion",key:"neg_fechacreacion",align:"center",sorter:function(e,t){return e.neg_fechacreacion.localeCompare(t.neg_fechacreacion)},render:function(e){return ye(e)}},{title:"Fecha de Cierre",dataIndex:"neg_fechacierre",key:"neg_fechacierre",align:"center",sorter:function(e,t){return e.neg_fechacierre.localeCompare(t.neg_fechacierre)},render:function(e){return ye(e)}},{title:"...",key:"tipoCerrado",align:"center",render:function(e,t){return Object(G.jsx)("span",{children:"cerrado"===le?Object(G.jsxs)(G.Fragment,{children:[1===t.neg_estado&&Object(G.jsx)(C.a,{title:"Cerrado Ganado",placement:"left",children:Object(G.jsx)(R.a,{style:{color:"green"}})}),2===t.neg_estado&&Object(G.jsx)(C.a,{title:"Cerrado Perdido",placement:"left",children:Object(G.jsx)(I.a,{style:{color:"red"}})})]}):null})}}],Ce=function(e){de(e),d("abierto"===e?c.filter((function(e){return 0===e.neg_estado})):"cerrado"===e?c.filter((function(e){return 0!==e.neg_estado})):c)},we=function(e,t,n){t()},De=function(e){e()};return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsxs)("div",{className:"card-wrapper",children:[Object(G.jsxs)("div",{className:"card-contadores",children:[Object(G.jsxs)("div",{className:"total"===le?"div-secundario dashed":"div-secundario",style:{cursor:"pointer"},onClick:function(){Ce("total")},children:[Object(G.jsx)("p",{className:"texto",children:"NEGOCIOS"}),Object(G.jsx)("p",{className:"numeros",children:M+V+te})]}),Object(G.jsx)(w.a,{type:"vertical",style:{height:"100%",borderColor:"#f0f0f0",borderWidth:"2px"}}),Object(G.jsxs)("div",{children:[Object(G.jsxs)("div",{className:"abierto"===le?"div-secundario dashed":"div-secundario",style:{cursor:"pointer"},onClick:function(){Ce("abierto")},children:[Object(G.jsx)("p",{className:"texto",children:"ABIERTOS"}),Object(G.jsx)("p",{className:"numeros",children:M})]}),Object(G.jsx)("hr",{className:"total"===le?"hr1":"cancela-hr"}),Object(G.jsxs)("div",{className:"cerrado"===le?"div-secundario dashed":"div-secundario",style:{cursor:"pointer"},onClick:function(){return Ce("cerrado")},children:[Object(G.jsx)("p",{className:"texto",children:"CERRADOS"}),Object(G.jsx)("p",{className:"numeros",children:V+te})]})]})]}),Object(G.jsx)(D.a,{className:"card-content",children:Object(G.jsxs)("div",{className:"div-content",children:[Object(G.jsx)("p",{className:"totales",children:"U$D ".concat(h.toLocaleString("de-DE",{minimumFractionDigits:0}))}),Object(G.jsx)("p",{className:"descripcion",children:"Total negocios"})]})}),Object(G.jsx)(D.a,{className:"card-content",children:Object(G.jsxs)("div",{className:"div-content",children:[Object(G.jsx)("p",{className:"totales",children:"U$D ".concat(A.toLocaleString("de-DE",{minimumFractionDigits:0}))}),Object(G.jsx)("p",{className:"descripcion",children:"Total % por etapa"})]})}),Object(G.jsx)("div",{className:"filter-data",children:Object(G.jsx)(J,{placement:"left",title:"Cotizaci\xf3n ".concat(be),children:K(be,Oe,he,ge)})})]}),Object(G.jsx)(k.a,{rowKey:"neg_id",size:"small",dataSource:l,columns:Se,pagination:{position:["none","bottomCenter"]}})]})},H=n(157),Q=n(110),V=n.n(Q),X=n(158),Z=n.n(X),ee=function(){var e=Object(H.a)(V.a.mark((function e(){var t,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"GET",url:"https://api-cotizaciones-tt7h9.ondigitalocean.app/api/dolaroficial"},e.next=4,Z()(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(err);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(H.a)(V.a.mark((function e(){var t,n;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"GET",url:"https://api-cotizaciones-tt7h9.ondigitalocean.app/api/real/nacion"},e.next=4,Z()(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(err);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ne=function(){var e=Object(E.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(E.useState)(0),r=Object(o.a)(c,2),i=r[0],u=r[1],j=Object(E.useState)(""),b=Object(o.a)(j,2),m=b[0],p=b[1],O=Object(E.useState)(!1),g=Object(o.a)(O,2),x=g[0],v=g[1];return ee().then((function(e){e.data&&(a(1/Number(e.data.venta)),p(e.data.fecha),v(!1))})),te().then((function(e){e.data&&u(1/Number(e.data.venta))})),Object(G.jsx)(q.Provider,{value:{cotizacionDolar:n,cotizacionReal:i,ultimaActualizacion:m,setReloadingApp:v},children:Object(G.jsx)(l.a,{locale:f.a,children:Object(G.jsx)(s.a,{client:h,children:Object(G.jsx)(d.a,{id:"main_loader",tip:"Cargando",spinning:x,className:"color",children:Object(G.jsx)(W,{})})})})})},ae=document.getElementById("root");i.a.render(Object(G.jsx)(ne,{}),ae)}},[[333,1,2]]]);
//# sourceMappingURL=main.a2adb5db.chunk.js.map