(this["webpackJsonptemplate-starter"]=this["webpackJsonptemplate-starter"]||[]).push([[0],{231:function(e,t,n){},232:function(e,t,n){},333:function(e,t,n){"use strict";n.r(t);var a,c,r=n(34),o=n.n(r),i=n(24),s=n(343),l=n(18),d=n(214),u=n(348),j=n(349),b=n(347),p=window.location.protocol,m=window.location.hostname,O=("".concat(p,"//").concat(m,":").concat("4002"),new u.a({connectToDevTools:!0,cache:new j.a,link:new b.a({uri:"http://10.0.0.28:4002"})})),g=n(215),h=n.n(g),f=(n(231),n(182)),x=n(216),v=n(352),_=n(78),N=n(351),S=n(353),w=n(105),y=n(342),C=n(345),I=n(344),k=n(108),D=n(355),E=n(356),R=(n(232),n(0)),z=n(350),F=n(142),A=n(346),L=Object(A.a)(a||(a=Object(F.a)(["\n  query getNegociosIframe($idCliente: Int) {\n    getNegociosIframeResolver(idCliente: $idCliente)\n  }\n"]))),U=Object(A.a)(c||(c=Object(F.a)(["\n  query getConfig {\n    getConfiguracionResolver\n  }\n"]))),T=Object(R.createContext)([]),B=function(e,t,n,a){var c=0;return e.mon_id!==t?2==t?c=1==e.mon_id?e.neg_valor*n:e.neg_valor*(n/a):3==t?c=1==e.mon_id?e.neg_valor*a:e.neg_valor*(a/n):1==t&&(c=2==e.mon_id?e.neg_valor*(1/n):e.neg_valor*(1/a)):c=e.neg_valor,{nuevoImporte:c}},q=n(219),$=n(8),G=function(e){var t=e.title,n=e.placement,a=e.children;return Object($.jsx)($.Fragment,{children:Object($.jsx)(N.a,{placement:n,title:t,content:a,trigger:"click",children:Object($.jsxs)(_.a,{type:"link",style:{padding:0},children:[" ",Object($.jsx)(q.a,{style:{paddingLeft:0,marginRight:7,color:"#00b33c"}})]})})})},J=n(210),P=n.n(J),Y=function(e,t,n,a){switch(e){case"AR$":return K("1 USD =","1 BRL =",1/t,1/n,e,a);case"USD":return K("1 AR$ =","1 BRL =",t,t/n,e,a);case"BRL":return K("1 AR$ =","1 USD =",n,1/t*n,e,a)}},K=function(e,t,n,a,c,r){return Object($.jsx)("div",{className:"cotizaciones",children:a?Object($.jsxs)($.Fragment,{children:[Object($.jsxs)("p",{className:"cotizaciones_p",children:[Object($.jsx)("span",{className:"cotizacion",children:e})," ","".concat(c," ")," ",n.toLocaleString("de-DE",{maximumFractionDigits:2})]}),Object($.jsxs)("p",{className:"cotizaciones_p",children:[Object($.jsx)("span",{className:"cotizacion",children:t})," ","".concat(c," ")," ",a.toLocaleString("de-DE",{maximumFractionDigits:2})]}),Object($.jsxs)("p",{className:"info_data cotizaciones_p",children:["ultima actualizacion:"," ",Object($.jsxs)("strong",{children:[P()(r).format("DD/MM/YYYY hh:mm")," hs"]})]})]}):Object($.jsxs)("p",{className:"info_data cotizaciones_p",children:["Momentaneamente el servicio de cotizaciones se encuentra"," ",Object($.jsx)("strong",{children:"suspendido."})]})})},M=function(){var e=window.location.search.split("="),t=e[1].split("?")[0],n=Object(R.useRef)(null),a=Object(R.useState)([]),c=Object(i.a)(a,2),r=c[0],o=c[1],s=Object(R.useState)([]),l=Object(i.a)(s,2),d=l[0],u=l[1],j=Object(R.useState)([]),b=Object(i.a)(j,2),p=b[0],m=b[1],O=Object(R.useState)([]),g=Object(i.a)(O,2),h=g[0],F=g[1],A=Object(R.useState)([]),q=Object(i.a)(A,2),J=q[0],P=q[1],K=Object(R.useState)([]),M=Object(i.a)(K,2),W=M[0],H=M[1],Q=Object(R.useState)([]),V=Object(i.a)(Q,2),X=V[0],Z=V[1],ee=Object(R.useState)([]),te=Object(i.a)(ee,2),ne=te[0],ae=te[1],ce=Object(R.useState)([]),re=Object(i.a)(ce,2),oe=re[0],ie=re[1],se=Object(R.useState)("abierto"),le=Object(i.a)(se,2),de=le[0],ue=le[1],je=Object(R.useState)([]),be=Object(i.a)(je,2),pe=be[0],me=be[1],Oe=Object(R.useState)([]),ge=Object(i.a)(Oe,2),he=ge[0],fe=ge[1],xe=Object(R.useContext)(T),ve=xe.cotizacionDolar,_e=xe.cotizacionReal,Ne=xe.ultimaActualizacion,Se=xe.setReloadingApp,we=(xe.usuA,xe.setUsuA,xe.idEtapa),ye=xe.setIdEtapa,Ce=xe.idNeg,Ie=xe.setIdNeg;xe.idUser;localStorage.setItem("IdNeg",Ce),localStorage.setItem("IdEtapa",we);var ke=Object(z.a)(L,{variables:{idCliente:Number(t)}}),De=ke.data,Ee=(ke.loading,ke.error,Object(z.a)(U).data);Object(R.useEffect)((function(){if(Se(!0),fe(e[2]?e[2]:"0"),De&&Ee){var t=JSON.parse(Ee.getConfiguracionResolver),n=JSON.parse(De.getNegociosIframeResolver);o(n.dataNeg),m(n.dataTags),ie(n.dataPipelines.map((function(e){return{text:e.pip_nombre,value:e.pip_nombre}})));var a=0,c=0,i=0,s=0,l=n.dataNeg.filter((function(e){return 0===e.neg_estado})),d=n.dataNeg.filter((function(e){return 0!==e.neg_estado}));u("abierto"===de?l:"cerrado"===de?d:r),H(l.length),Z(d.filter((function(e){return 1===e.neg_estado})).length),ae(d.filter((function(e){return 2===e.neg_estado})).length);var j=t[0].mon_id;me(t[0].mon_iso),l.map((function(e){var t=B(e,j,ve,_e).nuevoImporte;i+=t*e.eta_avance/100,a+=t})),d.map((function(e){var t=B(e,j,ve,_e).nuevoImporte;s+=t*e.eta_avance/100,c+=t})),"abierto"===de?(F(a),P(i)):"cerrado"===de?(F(c),P(s)):(F(a+c),P(i+s)),Se(!1)}}),[De,Ee,de]);var Re,ze=function(e){return e.split("T")[0].split("-").reverse().join("/")},Fe=[{title:"Embudo",dataIndex:"pip_nombre",key:"pip_nombre",filters:oe,onFilter:function(e,t){return t.pip_nombre===e},render:function(e){return Object($.jsx)("p",{className:"columna-color",children:e})}},{title:"Etapa",dataIndex:"eta_nombre",key:"eta_nombre",align:"left"},Object(f.a)(Object(f.a)({title:"Negocio",dataIndex:"neg_asunto",key:"neg_asunto"},(Re="neg_asunto",{filterDropdown:function(e){var t=e.setSelectedKeys,a=e.selectedKeys,c=e.confirm,r=e.clearFilters;return Object($.jsxs)("div",{style:{padding:8},children:[Object($.jsx)(x.a,{ref:n,placeholder:"Buscar negocio",value:a[0],onChange:function(e){return t(e.target.value?[e.target.value]:[])},onPressEnter:function(){return Le(a,c,Re)},style:{marginBottom:8,display:"block"}}),Object($.jsxs)(v.b,{children:[Object($.jsx)(_.a,{type:"primary",onClick:function(){return Le(a,c,Re)},icon:Object($.jsx)(k.a,{}),size:"small",style:{width:90},children:"Buscar"}),Object($.jsx)(_.a,{onClick:function(){return r&&Ue(r)},size:"small",style:{width:90},children:"Reiniciar"})]})]})},filterIcon:function(e){return Object($.jsx)(k.a,{style:{color:e?"#1890ff":void 0}})},onFilter:function(e,t){return t[Re]?t[Re].toString().toLowerCase().includes(e.toLowerCase()):""}})),{},{render:function(e,t){var n=p.filter((function(e){return e.neg_id===t.neg_id}));return Object($.jsxs)($.Fragment,{children:[Object($.jsx)("p",{className:"columna-color",children:e}),Object($.jsx)("div",{className:n.length>0?"div-contenedor":"",children:n.map((function(e,t){return Object($.jsx)(N.a,{content:n.map((function(e){return Object($.jsx)(S.a,{color:e.etq_color,children:e.etq_nombre},e.etq_id)})),children:Object($.jsx)(S.a,{color:e.etq_color,className:"tags"},e.etq_id)},t)}))})]})}}),{title:"Importe",dataIndex:"neg_valor",key:"neg_valor",align:"right",sorter:function(e,t){return e.neg_valor-t.neg_valor},render:function(e,t){return Object($.jsx)($.Fragment,{children:"".concat(t.mon_iso," ").concat(e.toLocaleString("de-DE",{minimumFractionDigits:0}))})}},{title:"% Etapa",dataIndex:"eta_avance",key:"eta_avance",align:"right",sorter:function(e,t){return e.eta_avance-t.eta_avance}},{title:"Fecha de Creaci\xf3n",dataIndex:"neg_fechacreacion",key:"neg_fechacreacion",align:"center",sorter:function(e,t){return e.neg_fechacreacion.localeCompare(t.neg_fechacreacion)},render:function(e){return ze(e)}},{title:"Fecha de Cierre",dataIndex:"neg_fechacierre",key:"neg_fechacierre",align:"center",sorter:function(e,t){return e.neg_fechacierre.localeCompare(t.neg_fechacierre)},render:function(e){return ze(e)}},{title:"...",key:"tipoCerrado",align:"center",render:function(e,t){return Object($.jsx)("span",{children:"cerrado"===de?Object($.jsxs)($.Fragment,{children:[1===t.neg_estado&&Object($.jsx)(w.a,{title:"Cerrado Ganado",placement:"left",children:Object($.jsx)(D.a,{style:{color:"green"}})}),2===t.neg_estado&&Object($.jsx)(w.a,{title:"Cerrado Perdido",placement:"left",children:Object($.jsx)(E.a,{style:{color:"red"}})})]}):null})}}],Ae=function(e){ue(e),u("abierto"===e?r.filter((function(e){return 0===e.neg_estado})):"cerrado"===e?r.filter((function(e){return 0!==e.neg_estado})):r)},Le=function(e,t,n){t()},Ue=function(e){e()};return Object($.jsxs)($.Fragment,{children:[Object($.jsxs)("div",{className:"card-wrapper",children:[Object($.jsxs)("div",{className:"card-contadores",children:[Object($.jsxs)("div",{className:"total"===de?"div-secundario dashed":"div-secundario",style:{cursor:"pointer"},onClick:function(){Ae("total")},children:[Object($.jsx)("p",{className:"texto",children:"NEGOCIOS"}),Object($.jsx)("p",{className:"numeros",children:W+X+ne})]}),Object($.jsx)(y.a,{type:"vertical",style:{height:"100%",borderColor:"#f0f0f0",borderWidth:"2px"}}),Object($.jsxs)("div",{children:[Object($.jsxs)("div",{className:"abierto"===de?"div-secundario dashed":"div-secundario",style:{cursor:"pointer"},onClick:function(){Ae("abierto")},children:[Object($.jsx)("p",{className:"texto",children:"ABIERTOS"}),Object($.jsx)("p",{className:"numeros",children:W})]}),Object($.jsx)("hr",{className:"total"===de?"hr1":"cancela-hr"}),Object($.jsxs)("div",{className:"cerrado"===de?"div-secundario dashed":"div-secundario",style:{cursor:"pointer"},onClick:function(){return Ae("cerrado")},children:[Object($.jsx)("p",{className:"texto",children:"CERRADOS"}),Object($.jsx)("p",{className:"numeros",children:X+ne})]})]})]}),Object($.jsx)(C.a,{className:"card-content",children:Object($.jsxs)("div",{className:"div-content",children:[Object($.jsx)("p",{className:"totales",children:"U$D ".concat(h.toLocaleString("de-DE",{minimumFractionDigits:0}))}),Object($.jsx)("p",{className:"descripcion",children:"Total negocios"})]})}),Object($.jsx)(C.a,{className:"card-content",children:Object($.jsxs)("div",{className:"div-content",children:[Object($.jsx)("p",{className:"totales",children:"U$D ".concat(J.toLocaleString("de-DE",{minimumFractionDigits:0}))}),Object($.jsx)("p",{className:"descripcion",children:"Total % por etapa"})]})}),"0"===he?Object($.jsx)("div",{className:"filter-data",children:Object($.jsx)(G,{placement:"left",title:"Cotizaci\xf3n ".concat(pe),children:Y(pe,ve,_e,Ne)})}):Object($.jsx)($.Fragment,{})]}),Object($.jsx)(I.a,{rowKey:"neg_id",size:"small",dataSource:d,columns:Fe,pagination:{position:["none","bottomCenter"]},onRow:function(e){return{onClick:function(){!function(e){Ie(e),console.log(we);var t=window.location.port?window.location.port:80,n=window.location.protocol,a=window.location.hostname,c=(window.location.pathname,"".concat(n,"//").concat(a,":").concat(t));console.log("URL ",c);var r=localStorage.getItem("usuario");window.location.href="".concat(n,"//").concat(a,":").concat(t,"/duoc/deal/?negId=").concat(e,"&cliId=").concat(r)}(e.neg_id),ye(e.eta_id)}}}})]})},W=n(157),H=n(110),Q=n.n(H),V=n(158),X=n.n(V),Z=function(){var e=Object(W.a)(Q.a.mark((function e(){var t,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"GET",url:"https://api-cotizaciones-tt7h9.ondigitalocean.app/api/dolaroficial"},e.next=4,X()(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(err);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=Object(W.a)(Q.a.mark((function e(){var t,n;return Q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={method:"GET",url:"https://api-cotizaciones-tt7h9.ondigitalocean.app/api/real/nacion"},e.next=4,X()(t);case 4:return n=e.sent,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.log(err);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=Object(R.useState)(0),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(R.useState)(0),r=Object(i.a)(c,2),o=r[0],u=r[1],j=Object(R.useState)(""),b=Object(i.a)(j,2),p=b[0],m=b[1],g=Object(R.useState)(!1),f=Object(i.a)(g,2),x=f[0],v=f[1],_=Object(R.useState)(""),N=Object(i.a)(_,2),S=N[0],w=N[1],y=Object(R.useState)(""),C=Object(i.a)(y,2),I=C[0],k=C[1],D=Object(R.useState)(""),E=Object(i.a)(D,2),z=E[0],F=E[1],A=Object(R.useState)(""),L=Object(i.a)(A,2),U=L[0],B=L[1];return Object(R.useEffect)((function(){var e=window.location.search;if(e){var t=e.split("=")[1];B(Number(t))}}),[]),Z().then((function(e){e.data&&(a(1/Number(e.data.venta)),m(e.data.fecha),v(!1))})),ee().then((function(e){e.data&&u(1/Number(e.data.venta))})),Object($.jsx)(T.Provider,{value:{cotizacionDolar:n,cotizacionReal:o,ultimaActualizacion:p,setReloadingApp:v,usuA:I,setUsuA:k,idEtapa:S,setIdEtapa:w,idNeg:z,setIdNeg:F,idUser:U,setIdUser:B},children:Object($.jsx)(l.a,{locale:h.a,children:Object($.jsx)(s.a,{client:O,children:Object($.jsx)(d.a,{id:"main_loader",tip:"Cargando",spinning:x,className:"color",children:Object($.jsx)(M,{})})})})})},ne=document.getElementById("root");o.a.render(Object($.jsx)(te,{}),ne)}},[[333,1,2]]]);
//# sourceMappingURL=main.7c703abd.chunk.js.map