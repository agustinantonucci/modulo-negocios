{"version":3,"sources":["apollo/ApolloClient.js","graphql/query/Negocios.js","graphql/query/Configuracion.js","components/context/GlobalContext.js","helpers/conversorMonedas.js","components/ui/table/Info.js","components/ui/table/InfoCotizacion.js","components/ui/table/TablaNegocios.js","helpers/getCotizacionDolar.js","helpers/getCotizacionReal.js","App.js","index.js"],"names":["PROTOCOL","window","location","protocol","HOSTNAME","hostname","URL","client","ApolloClient","connectToDevTools","cache","InMemoryCache","link","HttpLink","uri","GET_NEGOCIOS","gql","GET_CONFIGURACION","GlobalContext","createContext","conversorMonedas","elemento","monedaDefecto","cotizacionDolar","cotizacionReal","nuevoImporte","mon_id","neg_valor","Info","title","placement","children","content","trigger","type","style","padding","InfoCircleOutlined","paddingLeft","marginRight","color","infoCotizacion","monIsoBase","ultimaActualizacion","cotizacionSegunMonedaBase","moneda1","moneda2","cotizacion1","cotizacion2","className","toLocaleString","maximumFractionDigits","moment","format","TablaNegocios","idCliente","search","split","searchInput","useRef","useState","listadoNegocios","setListadoNegocios","listadoNegociosFiltrados","setListadoNegociosFiltrados","listadoEtiquetas","setListadoEtiquetas","totalMostrar","setTotalMostrar","totalEtapaMostrar","setTotalEtapaMostrar","cantAbiertos","setCantAbiertos","cantGanados","setCantGanados","cantPerdidos","setCantPerdidos","pipelines","setPipelines","tipoFiltro","setTipoFiltro","setMonIsoBase","useContext","setReloadingApp","useQuery","variables","Number","data","getConfiguracion","loading","error","useEffect","dataConfig","JSON","parse","getConfiguracionResolver","negocios","getNegociosIframeResolver","dataNeg","dataTags","dataPipelines","map","item","text","pip_nombre","value","sumaNegociosAbiertos","sumaNegociosCerrados","sumaEtapaAbiertos","sumaEtapaCerrados","negociosAbiertos","filter","negocio","neg_estado","negociosCerrados","length","mon_iso","eta_avance","dataIndex","getDate","date","reverse","join","columns","key","filters","onFilter","record","render","align","filterDropdown","setSelectedKeys","selectedKeys","confirm","clearFilters","ref","placeholder","onChange","e","target","onPressEnter","handleSearch","marginBottom","display","onClick","icon","SearchOutlined","size","width","handleReset","filterIcon","filtered","undefined","toString","toLowerCase","includes","etiquetasNegocios","x","neg_id","element","idx","etq_color","etq_nombre","etq_id","sorter","a","b","minimumFractionDigits","neg_fechacreacion","localeCompare","neg_fechacierre","LikeOutlined","DislikeOutlined","handleClickEstado","estado","cursor","height","borderColor","borderWidth","rowKey","dataSource","pagination","position","getCotizacionDolar","config","method","url","axios","res","console","log","err","getCotizacionReal","App","setCotizacionDolar","setCotizacionReal","setUltimaActualizacion","reloadingApp","then","venta","fecha","Provider","locale","esES","ApolloProvider","id","tip","spinning","rootElement","document","getElementById","ReactDOM"],"mappings":"qQAEMA,EAAWC,OAAOC,SAASC,SAC3BC,EAAWH,OAAOC,SAASG,SAC3BC,EAAG,UAAMN,EAAN,aAAmBI,EAAnB,YAHI,QAKAG,EAAS,IAAIC,IAAa,CACrCC,mBAAmB,EACnBC,MAAO,IAAIC,IACXC,KAAM,IAAIC,IAAS,CACjBC,IAAKR,M,0LCRIS,EAAeC,YAAH,qICAZC,EAAoBD,YAAH,oFCAjBE,EAAgBC,wBAAc,ICF9BC,EAAmB,SAC9BC,EACAC,EACAC,EACAC,GAEA,IAAIC,EAAe,EA0BnB,OAxBIJ,EAASK,SAAWJ,EACD,GAAjBA,EAEAG,EADqB,GAAnBJ,EAASK,OACIL,EAASM,UAAYJ,EAErBF,EAASM,WAAaJ,EAAkBC,GAE/B,GAAjBF,EAEPG,EADqB,GAAnBJ,EAASK,OACIL,EAASM,UAAYH,EAErBH,EAASM,WAAaH,EAAiBD,GAE9B,GAAjBD,IAEPG,EADqB,GAAnBJ,EAASK,OACIL,EAASM,WAAa,EAAIJ,GAE1BF,EAASM,WAAa,EAAIH,IAI7CC,EAAeJ,EAASM,UAGnB,CAACF,iB,gBCfKG,EAbF,SAAC,GAAoC,IAAlCC,EAAiC,EAAjCA,MAAOC,EAA0B,EAA1BA,UAAWC,EAAe,EAAfA,SAChC,OACE,mCACE,cAAC,IAAD,CAASD,UAAWA,EAAWD,MAAOA,EAAOG,QAASD,EAAUE,QAAQ,QAAxE,SACE,eAAC,IAAD,CAAQC,KAAK,OAAOC,MAAO,CAAEC,QAAS,GAAtC,UACG,IACD,cAACC,EAAA,EAAD,CAAoBF,MAAO,CAAEG,YAAa,EAAGC,YAAa,EAAGC,MAAO,qB,kBCPjEC,EAAiB,SAACC,EAAYnB,EAAiBC,EAAgBmB,GAG1E,OAAQD,GACN,IAAK,MAEH,OAAOE,EACL,UACA,UACA,EAAIrB,EACJ,EAAIC,EACJkB,EACAC,GAIJ,IAAK,MACH,OAAOC,EACL,UACA,UACArB,EACAA,EAAkBC,EAClBkB,EACAC,GAGJ,IAAK,MACH,OAAOC,EACL,UACA,UACApB,EACC,EAAID,EAAkBC,EACvBkB,EACAC,KAQFC,EAA4B,SAC9BC,EACAC,EACAC,EACAC,EACAN,EACAC,GAEA,OACE,qBAAKM,UAAU,eAAf,SACGD,EACC,qCACE,oBAAGC,UAAU,iBAAb,UACE,sBAAMA,UAAU,aAAhB,SAA8BJ,IADhC,cACoDH,EADpD,KACmE,IAChEK,EAAYG,eAAe,QAAS,CACnCC,sBAAuB,OAG3B,oBAAGF,UAAU,iBAAb,UACE,sBAAMA,UAAU,aAAhB,SAA8BH,IADhC,cACoDJ,EADpD,KACmE,IAChEM,EAAYE,eAAe,QAAS,CACnCC,sBAAuB,OAG3B,oBAAGF,UAAU,2BAAb,kCACwB,IACtB,mCACGG,IAAOT,GAAqBU,OAAO,oBADtC,eAMJ,oBAAGJ,UAAU,2BAAb,qEAC2D,IACzD,uDCuYGK,EA1bO,WACpB,IAEMC,EAFMtD,OAAOC,SAASsD,OACHC,MAAM,KACA,GAEzBC,EAAcC,iBAAO,MAC3B,EAA8CC,mBAAS,IAAvD,mBAAOC,EAAP,KAAwBC,EAAxB,KACA,EAAgEF,mBAAS,IAAzE,mBAAOG,EAAP,KAAiCC,EAAjC,KACA,EAAgDJ,mBAAS,IAAzD,mBAAOK,EAAP,KAAyBC,EAAzB,KACA,EAAwCN,mBAAS,IAAjD,mBAAOO,EAAP,KAAqBC,EAArB,KACA,EAAkDR,mBAAS,IAA3D,mBAAOS,EAAP,KAA0BC,EAA1B,KACA,EAAwCV,mBAAS,IAAjD,mBAAOW,EAAP,KAAqBC,EAArB,KACA,EAAsCZ,mBAAS,IAA/C,mBAAOa,EAAP,KAAoBC,EAApB,KACA,EAAwCd,mBAAS,IAAjD,oBAAOe,GAAP,MAAqBC,GAArB,MACA,GAAkChB,mBAAS,IAA3C,qBAAOiB,GAAP,MAAkBC,GAAlB,MACA,GAAoClB,mBAAS,WAA7C,qBAAOmB,GAAP,MAAmBC,GAAnB,MACA,GAAoCpB,mBAAS,IAA7C,qBAAOlB,GAAP,MAAmBuC,GAAnB,MAEA,GAKIC,qBAAWhE,GAJbK,GADF,GACEA,gBACAC,GAFF,GAEEA,eACAmB,GAHF,GAGEA,oBACAwC,GAJF,GAIEA,gBAGF,GAAiCC,YAASrE,EAAc,CACtDsE,UAAW,CAAE9B,UAAW+B,OAAO/B,MADzBgC,GAAR,GAAQA,KAIMC,IAJd,GAAcC,QAAd,GAAuBC,MAIYN,YAASnE,GAApCsE,MAERI,qBAAU,WAER,GADAR,IAAgB,GACZI,IAAQC,GAAkB,CAC5B,IAAMI,EAAaC,KAAKC,MAAMN,GAAiBO,0BACzCC,EAAWH,KAAKC,MAAMP,GAAKU,2BAEjCnC,EAAmBkC,EAASE,SAI5BhC,EAAoB8B,EAASG,UAC7BrB,GACEkB,EAASI,cAAcC,KAAI,SAACC,GAC1B,MAAO,CAAEC,KAAMD,EAAKE,WAAYC,MAAOH,EAAKE,gBAIhD,IAAIE,EAAuB,EACvBC,EAAuB,EAEvBC,EAAoB,EACpBC,EAAoB,EAElBC,EAAmBd,EAASE,QAAQa,QACxC,SAACC,GAAD,OAAoC,IAAvBA,EAAQC,cAGjBC,EAAmBlB,EAASE,QAAQa,QACxC,SAACC,GAAD,OAAoC,IAAvBA,EAAQC,cAGvBjD,EACiB,YAAfe,GAA2B+B,EAAkC,YAAf/B,GAA2BmC,EAAmBrD,GAG9FW,EAAgBsC,EAAiBK,QACjCzC,EACEwC,EAAiBH,QAAO,SAACC,GAAD,OAAoC,IAAvBA,EAAQC,cAAkBE,QAEjEvC,GACEsC,EAAiBH,QAAO,SAACC,GAAD,OAAoC,IAAvBA,EAAQC,cAAkBE,QAGjE,IAAM7F,EAAgBsE,EAAW,GAAGlE,OACpCuD,GAAcW,EAAW,GAAGwB,SAE5BN,EAAiBT,KAAI,SAACW,GACpB,IAEQvF,EAAiBL,EAFR4F,EAIf1F,EACAC,GACAC,IAJMC,aAORmF,GAAsBnF,EAAeuF,EAAQK,WAAc,IAC3DX,GAAwBjF,KAG1ByF,EAAiBb,KAAI,SAACW,GACpB,IAEQvF,EAAiBL,EAFR4F,EAIf1F,EACAC,GACAC,IAJMC,aAORoF,GAAsBpF,EAAeuF,EAAQK,WAAc,IAC3DV,GAAwBlF,KAQX,YAAfsD,IACKX,EAAgBsC,GACjBpC,EAAqBsC,IACN,YAAf7B,IACCX,EAAgBuC,GACjBrC,EAAqBuC,KACpBzC,EAAgBsC,EAAuBC,GACxCrC,EAAqBsC,EAAoBC,IAE7C1B,IAAgB,MAEjB,CAACI,GAAMC,GAAkBT,KAE5B,IAA8BuC,GAiExBC,GAAU,SAACC,GAGf,OAFcA,EAAK/D,MAAM,KAEZ,GAAGA,MAAM,KAAKgE,UAAUC,KAAK,MAKtCC,GAAU,CACd,CACE9F,MAAO,SACPyF,UAAW,aACXM,IAAK,aACLC,QAAShD,GACTiD,SAAU,SAACrB,EAAOsB,GAChB,OAAOA,EAAOvB,aAAeC,GAE/BuB,OAAQ,SAACV,GACP,OAAO,mBAAGrE,UAAU,gBAAb,SAA8BqE,MAGzC,CACEzF,MAAO,QACPyF,UAAW,aACXM,IAAK,aACLK,MAAO,SAjBK,yBAoBZpG,MAAO,UACPyF,UAAW,aACXM,IAAK,eA/FqBN,GAgGF,aAhGiB,CAC3CY,eAAgB,gBACdC,EADc,EACdA,gBACAC,EAFc,EAEdA,aACAC,EAHc,EAGdA,QACAC,EAJc,EAIdA,aAJc,OAMd,sBACEnG,MAAO,CACLC,QAAS,GAFb,UAKE,cAAC,IAAD,CACEmG,IAAK7E,EACL8E,YAAa,iBACb/B,MAAO2B,EAAa,GACpBK,SAAU,SAACC,GAAD,OACRP,EAAgBO,EAAEC,OAAOlC,MAAQ,CAACiC,EAAEC,OAAOlC,OAAS,KAEtDmC,aAAc,kBAAMC,GAAaT,EAAcC,EAASf,KACxDnF,MAAO,CACL2G,aAAc,EACdC,QAAS,WAGb,eAAC,IAAD,WACE,cAAC,IAAD,CACE7G,KAAK,UACL8G,QAAS,kBAAMH,GAAaT,EAAcC,EAASf,KACnD2B,KAAM,cAACC,EAAA,EAAD,IACNC,KAAK,QACLhH,MAAO,CACLiH,MAAO,IANX,oBAWA,cAAC,IAAD,CACEJ,QAAS,kBAAMV,GAAgBe,GAAYf,IAC3Ca,KAAK,QACLhH,MAAO,CACLiH,MAAO,IAJX,8BAYNE,WAAY,SAACC,GAAD,OACV,cAACL,EAAA,EAAD,CACE/G,MAAO,CACLK,MAAO+G,EAAW,eAAYC,MAIpC1B,SAAU,SAACrB,EAAOsB,GAAR,OACRA,EAAOT,IACHS,EAAOT,IACJmC,WACAC,cACAC,SAASlD,EAAMiD,eAClB,OAWQ,IAwBZ1B,OAAQ,SAACV,EAAWhB,GAClB,IAAMsD,EAAoB3F,EAAiB8C,QACzC,SAAC8C,GAAD,OAAOA,EAAEC,SAAWxD,EAAKwD,UAE3B,OACE,qCACE,mBAAG7G,UAAU,gBAAb,SAA8BqE,IAC9B,qBACErE,UAAW2G,EAAkBzC,OAAS,EAAI,iBAAmB,GAD/D,SAGGyC,EAAkBvD,KAAI,SAAC0D,EAASC,GAC/B,OACE,cAAC,IAAD,CAEEhI,QAAS4H,EAAkBvD,KAAI,SAAC0D,GAC9B,OACE,cAAC,IAAD,CAAKvH,MAAOuH,EAAQE,UAApB,SACGF,EAAQG,YADyBH,EAAQI,WAJlD,SAUE,cAAC,IAAD,CACE3H,MAAOuH,EAAQE,UAEfhH,UAAU,QADL8G,EAAQI,SAXVH,cAsBrB,CACEnI,MAAO,UACPyF,UAAW,YACXM,IAAK,YACLK,MAAO,QACPmC,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAE1I,UAAY2I,EAAE3I,WAClCqG,OAAQ,SAACV,EAAWhB,GAAZ,OACN,6CAAMA,EAAKc,QAAX,YAAsBE,EAAUpE,eAAe,QAAS,CACtDqH,sBAAuB,SAI7B,CACE1I,MAAO,UACPyF,UAAW,aACXM,IAAK,aACLK,MAAO,QACPmC,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAEhD,WAAaiD,EAAEjD,aAErC,CACExF,MAAO,uBACPyF,UAAW,oBACXM,IAAK,oBACLK,MAAO,SACPmC,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAEG,kBAAkBC,cAAcH,EAAEE,oBACtDxC,OAAQ,SAACV,GAAD,OAAeC,GAAQD,KAEjC,CACEzF,MAAO,kBACPyF,UAAW,kBACXM,IAAK,kBACLK,MAAO,SACPmC,OAAQ,SAACC,EAAGC,GAAJ,OAAUD,EAAEK,gBAAgBD,cAAcH,EAAEI,kBACpD1C,OAAQ,SAACV,GAAD,OAAeC,GAAQD,KAEjC,CACEzF,MAAO,MACP+F,IAAK,cACLK,MAAO,SACPD,OAAQ,SAACV,EAAWhB,GAClB,OACE,+BACkB,YAAfvB,GACC,qCACuB,IAApBuB,EAAKW,YACJ,cAAC,IAAD,CAASpF,MAAM,iBAAiBC,UAAU,OAA1C,SACE,cAAC6I,EAAA,EAAD,CAAcxI,MAAO,CAAEK,MAAO,aAGb,IAApB8D,EAAKW,YACJ,cAAC,IAAD,CAASpF,MAAM,kBAAkBC,UAAU,OAA3C,SACE,cAAC8I,EAAA,EAAD,CAAiBzI,MAAO,CAAEK,MAAO,cAIrC,UAORqI,GAAoB,SAACC,GACzB9F,GAAc8F,GAEZ9G,EADa,YAAX8G,EAEAjH,EAAgBkD,QAAO,SAAC8C,GAAD,OAAwB,IAAjBA,EAAE5C,cAEd,YAAX6D,EAEPjH,EAAgBkD,QAAO,SAAC8C,GAAD,OAAwB,IAAjBA,EAAE5C,cAGNpD,IAI1BgF,GAAe,SAACT,EAAcC,EAASf,GAC3Ce,KAGIgB,GAAc,SAACf,GACnBA,KAGF,OACE,qCACE,sBAAKrF,UAAU,eAAf,UACE,sBAAKA,UAAU,kBAAf,UACE,sBACEA,UACiB,UAAf8B,GACI,wBACA,iBAEN5C,MAAO,CAAE4I,OAAQ,WACjB/B,QAAS,WACP6B,GAAkB,UARtB,UAWE,mBAAG5H,UAAU,QAAb,sBACA,mBAAGA,UAAU,UAAb,SACGsB,EAAeE,EAAcE,QAGlC,cAAC,IAAD,CACEzC,KAAK,WACLC,MAAO,CACL6I,OAAQ,OACRC,YAAa,UACbC,YAAa,SAGjB,gCACE,sBACEjI,UACiB,YAAf8B,GACI,wBACA,iBAEN5C,MAAO,CAAE4I,OAAQ,WACjB/B,QAAS,WACP6B,GAAkB,YARtB,UAWE,mBAAG5H,UAAU,QAAb,sBACA,mBAAGA,UAAU,UAAb,SAAwBsB,OAE1B,oBAAItB,UAA0B,UAAf8B,GAAyB,MAAQ,eAChD,sBACE9B,UACiB,YAAf8B,GACI,wBACA,iBAEN5C,MAAO,CAAE4I,OAAQ,WACjB/B,QAAS,kBAAM6B,GAAkB,YAPnC,UASE,mBAAG5H,UAAU,QAAb,sBACA,mBAAGA,UAAU,UAAb,SAAwBwB,EAAcE,cAI5C,cAAC,IAAD,CAAM1B,UAAU,eAAhB,SACE,sBAAKA,UAAU,cAAf,UACE,mBAAGA,UAAU,UAAb,uBACUkB,EAAajB,eAAe,QAAS,CAC3CqH,sBAAuB,OAG3B,mBAAGtH,UAAU,cAAb,iCAGJ,cAAC,IAAD,CAAMA,UAAU,eAAhB,SACE,sBAAKA,UAAU,cAAf,UACE,mBAAGA,UAAU,UAAb,uBACUoB,EAAkBnB,eAAe,QAAS,CAChDqH,sBAAuB,OAG3B,mBAAGtH,UAAU,cAAb,oCAGJ,qBAAKA,UAAU,cAAf,SACE,cAAC,EAAD,CAAMnB,UAAW,OAAQD,MAAK,wBAAgBa,IAA9C,SACGD,EACCC,GACAnB,GACAC,GACAmB,WAKR,cAAC,IAAD,CACEwI,OAAQ,SACRhC,KAAM,QACNiC,WAAYrH,EACZ4D,QAASA,GACT0D,WAAY,CACVC,SAAU,CAAC,OAAQ,uB,6CC5chBC,GAAkB,uCAAG,8BAAAlB,EAAA,sEAExBmB,EAAS,CACbC,OAAQ,MACRC,IAAK,sEAJuB,SAOZC,IAAMH,GAPM,cAOxBI,EAPwB,yBAQvBA,GARuB,gCAU9BC,QAAQC,IAAIC,KAVkB,yDAAH,qDCAlBC,GAAiB,uCAAG,8BAAA3B,EAAA,sEAEvBmB,EAAS,CACbC,OAAQ,MACRC,IAAK,qEAJsB,SAOXC,IAAMH,GAPK,cAOvBI,EAPuB,yBAQtBA,GARsB,gCAU7BC,QAAQC,IAAIC,KAViB,yDAAH,qDCyCfE,GAhCH,WAEV,MAA8CrI,mBAAS,GAAvD,mBAAOrC,EAAP,KAAwB2K,EAAxB,KACA,EAA4CtI,mBAAS,GAArD,mBAAOpC,EAAP,KAAuB2K,EAAvB,KACA,EAAsDvI,mBAAS,IAA/D,mBAAOjB,EAAP,KAA4ByJ,EAA5B,KACA,EAAwCxI,oBAAS,GAAjD,mBAAOyI,EAAP,KAAqBlH,EAArB,KAcA,OAZAoG,KAAqBe,MAAK,SAACV,GACrBA,EAAIrG,OACN2G,EAAmB,EAAK5G,OAAOsG,EAAIrG,KAAKgH,QACxCH,EAAuBR,EAAIrG,KAAKiH,OAChCrH,GAAgB,OAIpB6G,KAAoBM,MAAK,SAACV,GACpBA,EAAIrG,MAAM4G,EAAkB,EAAK7G,OAAOsG,EAAIrG,KAAKgH,WAIrD,cAACrL,EAAcuL,SAAf,CAAwBhG,MAAO,CAAClF,kBAAiBC,iBAAgBmB,sBAAqBwC,mBAAtF,SACE,cAAC,IAAD,CAAgBuH,OAAQC,IAAxB,SACE,cAACC,EAAA,EAAD,CAAgBrM,OAAQA,EAAxB,SACE,cAAC,IAAD,CAAMsM,GAAG,cAAcC,IAAI,WAAWC,SAAUV,EAAcpJ,UAAU,QAAxE,SACE,cAAC,EAAD,aC/BN+J,GAAcC,SAASC,eAAe,QAC5CC,IAASnF,OAAO,cAAC,GAAD,IAASgF,M","file":"static/js/main.a2adb5db.chunk.js","sourcesContent":["import { ApolloClient, HttpLink, InMemoryCache } from \"@apollo/client\";\nconst PORT = \"4002\";\nconst PROTOCOL = window.location.protocol;\nconst HOSTNAME = window.location.hostname;\nconst URL = `${PROTOCOL}//${HOSTNAME}:${PORT}`;\n\nexport const client = new ApolloClient({\n  connectToDevTools: true,\n  cache: new InMemoryCache(),\n  link: new HttpLink({\n    uri: URL,\n    // uri: `http://10.0.0.141:4002`,\n    // uri: \"http://170.239.49.41:4002\",\n    //uri: \"http://beeapp.binamics.com.ar:4002\",\n    // uri: \"http://localhost:4002\",\n     //uri: URL,\n    //  uri: \"http://10.0.0.28:4002\",\n    // uri: \"http://170.239.49.41:4002\",\n  }),\n});\n","import { gql } from \"@apollo/client\";\n\nexport const GET_NEGOCIOS = gql`\n  query getNegociosIframe($idCliente: Int) {\n    getNegociosIframeResolver(idCliente: $idCliente)\n  }\n`;\n","import { gql } from \"@apollo/client\";\n\nexport const GET_CONFIGURACION = gql`\n  query getConfig {\n    getConfiguracionResolver\n  }\n`;\n","import { createContext } from 'react';\n\nexport const GlobalContext = createContext([]);\n","export const conversorMonedas = (\n  elemento,\n  monedaDefecto,\n  cotizacionDolar,\n  cotizacionReal\n) => {\n  let nuevoImporte = 0;\n\n  if (elemento.mon_id !== monedaDefecto) {\n    if (monedaDefecto == 2) {\n      if (elemento.mon_id == 1) {\n        nuevoImporte = elemento.neg_valor * cotizacionDolar;\n      } else {\n        nuevoImporte = elemento.neg_valor * (cotizacionDolar / cotizacionReal);\n      }\n    } else if (monedaDefecto == 3) {\n      if (elemento.mon_id == 1) {\n        nuevoImporte = elemento.neg_valor * cotizacionReal;\n      } else {\n        nuevoImporte = elemento.neg_valor * (cotizacionReal / cotizacionDolar);\n      }\n    } else if (monedaDefecto == 1) {\n      if (elemento.mon_id == 2) {\n        nuevoImporte = elemento.neg_valor * (1 / cotizacionDolar);\n      } else {\n        nuevoImporte = elemento.neg_valor * (1 / cotizacionReal);\n      }\n    }\n  } else {\n    nuevoImporte = elemento.neg_valor;\n  }\n  \n  return {nuevoImporte};\n};\n","\nimport { Popover, Button } from 'antd';\nimport { InfoCircleOutlined } from '@ant-design/icons';\n\nconst Info = ({ title, placement, children }) => {\n  return (\n    <>\n      <Popover placement={placement} title={title} content={children} trigger=\"click\">\n        <Button type=\"link\" style={{ padding: 0 }}>\n          {' '}\n          <InfoCircleOutlined style={{ paddingLeft: 0, marginRight: 7, color: \"#00b33c\" }} />\n        </Button>\n      </Popover>\n    </>\n  );\n};\n\nexport default Info;","import moment from \"moment\";\n\n\nexport const infoCotizacion = (monIsoBase, cotizacionDolar, cotizacionReal, ultimaActualizacion) => {\n  // Devuelve el componente correspondiente según la moneda base.\n\n  switch (monIsoBase) {\n    case \"AR$\":\n      //1. Si la moneda base es Pesos: moneda 1 = Dolar, moneda2= Real , cotizacion1=cotizacionDolar, Cotizacion2=Cotizacion real\n      return cotizacionSegunMonedaBase(\n        \"1 USD =\",\n        \"1 BRL =\",\n        1 / cotizacionDolar,\n        1 / cotizacionReal,\n        monIsoBase,\n        ultimaActualizacion\n      );\n\n    //2. Si la moneda base es Dolares:Moneda 1= AR$ moneda= 2 BRL, 1/cotizacion dolar , cotizacionReal/cotizacionDolar\n    case \"USD\":\n      return cotizacionSegunMonedaBase(\n        \"1 AR$ =\",\n        \"1 BRL =\",\n        cotizacionDolar,\n        cotizacionDolar / cotizacionReal,\n        monIsoBase,\n        ultimaActualizacion\n      );\n    //3. Si la moneda base es REAL:Moneda 1= AR$ moneda= 2 USD, 1/cotizacionReal , 1/cotizacionReal*cotizacionDolar\n    case \"BRL\":\n      return cotizacionSegunMonedaBase(\n        \"1 AR$ =\",\n        \"1 USD =\",\n        cotizacionReal,\n        (1 / cotizacionDolar * cotizacionReal),\n        monIsoBase,\n        ultimaActualizacion\n      );\n\n    default:\n      break;\n  }\n};\n\nconst cotizacionSegunMonedaBase = (\n    moneda1,\n    moneda2,\n    cotizacion1,\n    cotizacion2,\n    monIsoBase,\n    ultimaActualizacion\n  ) => {\n    return (\n      <div className=\"cotizaciones\">\n        {cotizacion2 ? (\n          <>\n            <p className=\"cotizaciones_p\">\n              <span className=\"cotizacion\">{moneda1}</span> {`${monIsoBase} `}{\" \"}\n              {cotizacion1.toLocaleString(\"de-DE\", {\n                maximumFractionDigits: 2,\n              })}\n            </p>\n            <p className=\"cotizaciones_p\">\n              <span className=\"cotizacion\">{moneda2}</span> {`${monIsoBase} `}{\" \"}\n              {cotizacion2.toLocaleString(\"de-DE\", {\n                maximumFractionDigits: 2,\n              })}\n            </p>\n            <p className=\"info_data cotizaciones_p\">\n              ultima actualizacion:{\" \"}\n              <strong>\n                {moment(ultimaActualizacion).format(\"DD/MM/YYYY hh:mm\")} hs\n              </strong>\n            </p>\n          </>\n        ) : (\n          <p className=\"info_data cotizaciones_p\">\n            Momentaneamente el servicio de cotizaciones se encuentra{\" \"}\n            <strong>suspendido.</strong>\n          </p>\n        )}\n      </div>\n    );\n  };","import {\n  Table,\n  Tag,\n  Space,\n  Input,\n  Button,\n  Card,\n  Popover,\n  Divider,\n  Tooltip,\n} from \"antd\";\nimport {\n  DislikeOutlined,\n  LikeOutlined,\n  SearchOutlined,\n} from \"@ant-design/icons\";\nimport \"./index.css\";\nimport { useState, useRef, useEffect } from \"react\";\nimport { useQuery } from \"@apollo/client\";\nimport { GET_NEGOCIOS } from \"../../../graphql/query/Negocios\";\nimport { GET_CONFIGURACION } from \"../../../graphql/query/Configuracion\";\nimport { GlobalContext } from \"../../context/GlobalContext\";\nimport { useContext } from \"react\";\nimport { conversorMonedas } from \"../../../helpers/conversorMonedas\";\nimport Info from \"./Info\";\nimport { infoCotizacion } from \"./InfoCotizacion\";\n\nconst TablaNegocios = () => {\n  const url = window.location.search;\n  const urlParameter = url.split(\"=\");\n  const idCliente = urlParameter[1];\n\n  const searchInput = useRef(null);\n  const [listadoNegocios, setListadoNegocios] = useState([]);\n  const [listadoNegociosFiltrados, setListadoNegociosFiltrados] = useState([]);\n  const [listadoEtiquetas, setListadoEtiquetas] = useState([]);\n  const [totalMostrar, setTotalMostrar] = useState([]);\n  const [totalEtapaMostrar, setTotalEtapaMostrar] = useState([]);\n  const [cantAbiertos, setCantAbiertos] = useState([]);\n  const [cantGanados, setCantGanados] = useState([]);\n  const [cantPerdidos, setCantPerdidos] = useState([]);\n  const [pipelines, setPipelines] = useState([]);\n  const [tipoFiltro, setTipoFiltro] = useState(\"abierto\");\n  const [monIsoBase, setMonIsoBase] = useState([]);\n\n  const {\n    cotizacionDolar,\n    cotizacionReal,\n    ultimaActualizacion,\n    setReloadingApp,\n  } = useContext(GlobalContext);\n\n  const { data, loading, error } = useQuery(GET_NEGOCIOS, {\n    variables: { idCliente: Number(idCliente) },\n  });\n\n  const { data: getConfiguracion } = useQuery(GET_CONFIGURACION);\n\n  useEffect(() => {\n    setReloadingApp(true);\n    if (data && getConfiguracion) {\n      const dataConfig = JSON.parse(getConfiguracion.getConfiguracionResolver);\n      const negocios = JSON.parse(data.getNegociosIframeResolver);\n\n      setListadoNegocios(negocios.dataNeg);\n\n      \n\n      setListadoEtiquetas(negocios.dataTags);\n      setPipelines(\n        negocios.dataPipelines.map((item) => {\n          return { text: item.pip_nombre, value: item.pip_nombre };\n        })\n      );\n\n      let sumaNegociosAbiertos = 0;\n      let sumaNegociosCerrados = 0;\n\n      let sumaEtapaAbiertos = 0;\n      let sumaEtapaCerrados = 0;\n\n      const negociosAbiertos = negocios.dataNeg.filter(\n        (negocio) => negocio.neg_estado === 0\n      );\n\n      const negociosCerrados = negocios.dataNeg.filter(\n        (negocio) => negocio.neg_estado !== 0\n      );\n\n      setListadoNegociosFiltrados(\n        tipoFiltro === \"abierto\" ? negociosAbiertos : tipoFiltro === \"cerrado\" ? negociosCerrados : listadoNegocios\n      );\n\n      setCantAbiertos(negociosAbiertos.length);\n      setCantGanados(\n        negociosCerrados.filter((negocio) => negocio.neg_estado === 1).length\n      );\n      setCantPerdidos(\n        negociosCerrados.filter((negocio) => negocio.neg_estado === 2).length\n      );\n\n      const monedaDefecto = dataConfig[0].mon_id;\n      setMonIsoBase(dataConfig[0].mon_iso);\n\n      negociosAbiertos.map((negocio) => {\n        const elemento = negocio;\n\n        const { nuevoImporte } = conversorMonedas(\n          elemento,\n          monedaDefecto,\n          cotizacionDolar,\n          cotizacionReal\n        );\n\n        sumaEtapaAbiertos += (nuevoImporte * negocio.eta_avance) / 100;\n        sumaNegociosAbiertos += nuevoImporte;\n      });\n\n      negociosCerrados.map((negocio) => {\n        const elemento = negocio;\n\n        const { nuevoImporte } = conversorMonedas(\n          elemento,\n          monedaDefecto,\n          cotizacionDolar,\n          cotizacionReal\n        );\n\n        sumaEtapaCerrados += (nuevoImporte * negocio.eta_avance) / 100;\n        sumaNegociosCerrados += nuevoImporte;\n      });\n\n      // const{ totalNegocios, totalEtapas } = calcularTotales(tipoFiltro, sumaNegociosAbiertos, sumaNegociosCerrados, sumaEtapaAbiertos, sumaEtapaCerrados);\n\n      // setTotalMostrar(totalNegocios);\n      // setTotalEtapaMostrar(totalEtapas);\n      \n      tipoFiltro === \"abierto\"\n        ? (setTotalMostrar(sumaNegociosAbiertos),\n          setTotalEtapaMostrar(sumaEtapaAbiertos))\n        : tipoFiltro === \"cerrado\"\n        ? (setTotalMostrar(sumaNegociosCerrados),\n          setTotalEtapaMostrar(sumaEtapaCerrados))\n        : (setTotalMostrar(sumaNegociosAbiertos + sumaNegociosCerrados),\n          setTotalEtapaMostrar(sumaEtapaAbiertos + sumaEtapaCerrados));\n\n      setReloadingApp(false);\n    }\n  }, [data, getConfiguracion, tipoFiltro]);\n\n  const getColumnSearchProps = (dataIndex) => ({\n    filterDropdown: ({\n      setSelectedKeys,\n      selectedKeys,\n      confirm,\n      clearFilters,\n    }) => (\n      <div\n        style={{\n          padding: 8,\n        }}\n      >\n        <Input\n          ref={searchInput}\n          placeholder={\"Buscar negocio\"}\n          value={selectedKeys[0]}\n          onChange={(e) =>\n            setSelectedKeys(e.target.value ? [e.target.value] : [])\n          }\n          onPressEnter={() => handleSearch(selectedKeys, confirm, dataIndex)}\n          style={{\n            marginBottom: 8,\n            display: \"block\",\n          }}\n        />\n        <Space>\n          <Button\n            type=\"primary\"\n            onClick={() => handleSearch(selectedKeys, confirm, dataIndex)}\n            icon={<SearchOutlined />}\n            size=\"small\"\n            style={{\n              width: 90,\n            }}\n          >\n            Buscar\n          </Button>\n          <Button\n            onClick={() => clearFilters && handleReset(clearFilters)}\n            size=\"small\"\n            style={{\n              width: 90,\n            }}\n          >\n            Reiniciar\n          </Button>\n        </Space>\n      </div>\n    ),\n    filterIcon: (filtered) => (\n      <SearchOutlined\n        style={{\n          color: filtered ? \"#1890ff\" : undefined,\n        }}\n      />\n    ),\n    onFilter: (value, record) =>\n      record[dataIndex]\n        ? record[dataIndex]\n            .toString()\n            .toLowerCase()\n            .includes(value.toLowerCase())\n        : \"\",\n  });\n\n  const getDate = (date) => {\n    const fecha = date.split(\"T\");\n\n    return fecha[0].split(\"-\").reverse().join(\"/\");\n  };\n\n\n\n  const columns = [\n    {\n      title: \"Embudo\",\n      dataIndex: \"pip_nombre\",\n      key: \"pip_nombre\",\n      filters: pipelines,\n      onFilter: (value, record) => {\n        return record.pip_nombre === value;\n      },\n      render: (dataIndex) => {\n        return <p className=\"columna-color\">{dataIndex}</p>;\n      },\n    },\n    {\n      title: \"Etapa\",\n      dataIndex: \"eta_nombre\",\n      key: \"eta_nombre\",\n      align: \"right\",\n    },\n    {\n      title: \"Negocio\",\n      dataIndex: \"neg_asunto\",\n      key: \"neg_asunto\",\n      ...getColumnSearchProps(\"neg_asunto\"),\n      render: (dataIndex, item) => {\n        const etiquetasNegocios = listadoEtiquetas.filter(\n          (x) => x.neg_id === item.neg_id\n        );\n        return (\n          <>\n            <p className=\"columna-color\">{dataIndex}</p>\n            <div\n              className={etiquetasNegocios.length > 0 ? \"div-contenedor\" : \"\"}\n            >\n              {etiquetasNegocios.map((element, idx) => {\n                return (\n                  <Popover\n                    key={idx}\n                    content={etiquetasNegocios.map((element) => {\n                      return (\n                        <Tag color={element.etq_color} key={element.etq_id}>\n                          {element.etq_nombre}\n                        </Tag>\n                      );\n                    })}\n                  >\n                    <Tag\n                      color={element.etq_color}\n                      key={element.etq_id}\n                      className=\"tags\"\n                    ></Tag>\n                  </Popover>\n                );\n              })}\n            </div>\n          </>\n        );\n      },\n    },\n    {\n      title: \"Importe\",\n      dataIndex: \"neg_valor\",\n      key: \"neg_valor\",\n      align: \"right\",\n      sorter: (a, b) => a.neg_valor - b.neg_valor,\n      render: (dataIndex, item) => (\n        <>{`${item.mon_iso} ${dataIndex.toLocaleString(\"de-DE\", {\n          minimumFractionDigits: 0,\n        })}`}</>\n      ),\n    },\n    {\n      title: \"% Etapa\",\n      dataIndex: \"eta_avance\",\n      key: \"eta_avance\",\n      align: \"right\",\n      sorter: (a, b) => a.eta_avance - b.eta_avance,\n    },\n    {\n      title: \"Fecha de Creación\",\n      dataIndex: \"neg_fechacreacion\",\n      key: \"neg_fechacreacion\",\n      align: \"center\",\n      sorter: (a, b) => a.neg_fechacreacion.localeCompare(b.neg_fechacreacion),\n      render: (dataIndex) => getDate(dataIndex),\n    },\n    {\n      title: \"Fecha de Cierre\",\n      dataIndex: \"neg_fechacierre\",\n      key: \"neg_fechacierre\",\n      align: \"center\",\n      sorter: (a, b) => a.neg_fechacierre.localeCompare(b.neg_fechacierre),\n      render: (dataIndex) => getDate(dataIndex),\n    },\n    {\n      title: \"...\",\n      key: \"tipoCerrado\",\n      align: \"center\",\n      render: (dataIndex, item) => {\n        return (\n          <span>\n            {tipoFiltro === \"cerrado\" ? (\n              <>\n                {item.neg_estado === 1 && (\n                  <Tooltip title=\"Cerrado Ganado\" placement=\"left\">\n                    <LikeOutlined style={{ color: \"green\" }} />\n                  </Tooltip>\n                )}\n                {item.neg_estado === 2 && (\n                  <Tooltip title=\"Cerrado Perdido\" placement=\"left\">\n                    <DislikeOutlined style={{ color: \"red\" }} />\n                  </Tooltip>\n                )}\n              </>\n            ) : null}\n          </span>\n        );\n      },\n    },\n  ];\n\n  const handleClickEstado = (estado) => {\n    setTipoFiltro(estado);\n    if (estado === \"abierto\") {\n      setListadoNegociosFiltrados(\n        listadoNegocios.filter((x) => x.neg_estado === 0)\n      );\n    } else if (estado === \"cerrado\") {\n      setListadoNegociosFiltrados(\n        listadoNegocios.filter((x) => x.neg_estado !== 0)\n      );\n    } else {\n      setListadoNegociosFiltrados(listadoNegocios);\n    }\n  };\n\n  const handleSearch = (selectedKeys, confirm, dataIndex) => {\n    confirm();\n  };\n\n  const handleReset = (clearFilters) => {\n    clearFilters();\n  };\n\n  return (\n    <>\n      <div className=\"card-wrapper\">\n        <div className=\"card-contadores\">\n          <div\n            className={\n              tipoFiltro === \"total\"\n                ? \"div-secundario dashed\"\n                : \"div-secundario\"\n            }\n            style={{ cursor: \"pointer\" }}\n            onClick={() => {\n              handleClickEstado(\"total\");\n            }}\n          >\n            <p className=\"texto\">NEGOCIOS</p>\n            <p className=\"numeros\">\n              {cantAbiertos + cantGanados + cantPerdidos}\n            </p>\n          </div>\n          <Divider\n            type=\"vertical\"\n            style={{\n              height: \"100%\",\n              borderColor: \"#f0f0f0\",\n              borderWidth: \"2px\",\n            }}\n          />\n          <div>\n            <div\n              className={\n                tipoFiltro === \"abierto\"\n                  ? \"div-secundario dashed\"\n                  : \"div-secundario\"\n              }\n              style={{ cursor: \"pointer\" }}\n              onClick={() => {\n                handleClickEstado(\"abierto\");\n              }}\n            >\n              <p className=\"texto\">ABIERTOS</p>\n              <p className=\"numeros\">{cantAbiertos}</p>\n            </div>\n            <hr className={tipoFiltro === \"total\" ? \"hr1\" : \"cancela-hr\"} />\n            <div\n              className={\n                tipoFiltro === \"cerrado\"\n                  ? \"div-secundario dashed\"\n                  : \"div-secundario\"\n              }\n              style={{ cursor: \"pointer\" }}\n              onClick={() => handleClickEstado(\"cerrado\")}\n            >\n              <p className=\"texto\">CERRADOS</p>\n              <p className=\"numeros\">{cantGanados + cantPerdidos}</p>\n            </div>\n          </div>\n        </div>\n        <Card className=\"card-content\">\n          <div className=\"div-content\">\n            <p className=\"totales\">\n              {`U$D ${totalMostrar.toLocaleString(\"de-DE\", {\n                minimumFractionDigits: 0,\n              })}`}\n            </p>\n            <p className=\"descripcion\">Total negocios</p>\n          </div>\n        </Card>\n        <Card className=\"card-content\">\n          <div className=\"div-content\">\n            <p className=\"totales\">\n              {`U$D ${totalEtapaMostrar.toLocaleString(\"de-DE\", {\n                minimumFractionDigits: 0,\n              })}`}\n            </p>\n            <p className=\"descripcion\">Total % por etapa</p>\n          </div>\n        </Card>\n        <div className=\"filter-data\">\n          <Info placement={\"left\"} title={`Cotización ${monIsoBase}`}>\n            {infoCotizacion(\n              monIsoBase,\n              cotizacionDolar,\n              cotizacionReal,\n              ultimaActualizacion\n            )}\n          </Info>\n        </div>\n      </div>\n      <Table\n        rowKey={\"neg_id\"}\n        size={\"small\"}\n        dataSource={listadoNegociosFiltrados}\n        columns={columns}\n        pagination={{\n          position: [\"none\", \"bottomCenter\"],\n        }}\n      />\n    </>\n  );\n};\n\nexport default TablaNegocios;\n","import axios from \"axios\";\n\nexport const getCotizacionDolar = async () => {\n  try {\n    const config = {\n      method: \"GET\",\n      url: \"https://api-cotizaciones-tt7h9.ondigitalocean.app/api/dolaroficial\",\n    };\n\n    const res = await axios(config);\n    return res;\n  } catch (error) {\n    console.log(err);\n  }\n};\n","import axios from \"axios\";\n\nexport const getCotizacionReal = async () => {\n  try {\n    const config = {\n      method: \"GET\",\n      url: \"https://api-cotizaciones-tt7h9.ondigitalocean.app/api/real/nacion\",\n    };\n\n    const res = await axios(config);\n    return res;\n  } catch (error) {\n    console.log(err);\n  }\n};\n","import { ApolloProvider } from \"@apollo/client\";\nimport { ConfigProvider, Spin } from \"antd\";\nimport { client } from \"./apollo/ApolloClient\";\nimport esES from \"antd/lib/locale/es_ES\";\nimport \"./App.css\";\nimport TablaNegocios from \"./components/ui/table/TablaNegocios\";\nimport { GlobalContext } from \"./components/context/GlobalContext\";\nimport { useState } from \"react\";\nimport {getCotizacionDolar} from '../src/helpers/getCotizacionDolar'; \nimport {getCotizacionReal} from '../src/helpers/getCotizacionReal';\n\nconst App = () => {\n\n  const [cotizacionDolar, setCotizacionDolar] = useState(0);\n  const [cotizacionReal, setCotizacionReal] = useState(0);\n  const [ultimaActualizacion, setUltimaActualizacion] = useState(\"\")\n  const [reloadingApp, setReloadingApp] = useState(false);\n\n  getCotizacionDolar().then((res) => {\n    if (res.data){\n      setCotizacionDolar(1 / (Number(res.data.venta)));\n      setUltimaActualizacion(res.data.fecha);\n      setReloadingApp(false);\n    }\n  });\n\n  getCotizacionReal().then((res) => {\n    if (res.data) setCotizacionReal(1 / (Number(res.data.venta)));\n  });\n\n  return (\n    <GlobalContext.Provider value={{cotizacionDolar, cotizacionReal, ultimaActualizacion, setReloadingApp}}>\n      <ConfigProvider locale={esES}>\n        <ApolloProvider client={client}>\n          <Spin id=\"main_loader\" tip=\"Cargando\" spinning={reloadingApp} className=\"color\">\n            <TablaNegocios />\n          </Spin>\n        </ApolloProvider>\n      </ConfigProvider>\n    </GlobalContext.Provider>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<App />, rootElement);\n"],"sourceRoot":""}